require=function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){function c(a,b,c){var d={};this.sections=function(){return e.copy(d)},this.sync=function(){Object.keys(a).forEach(function(b){var e=a[b],f={},g=null;f.template=function(a){g=a},c.invoke(e,f),d[b]=g})}}function d(){var a={};this.addSection=function(b,c){var d;if(b in a)throw d="LayoutManagerProvider.addSection() duplicate section ",d+="definition: "+b;return a[b]=c,this},this.$get=["$rootScope","$injector",function(b,d){return new c(a,b,d)}]}var e=a("ng");b.exports=d},{ng:"QBxXRv"}],QBxXRv:[function(a,b){b.exports=angular},{}],ng:[function(a,b){b.exports=a("QBxXRv")},{}],4:[function(a){"use strict";var b=a("ng");b.module("kloy.router",[]).constant("KLOY_ROUTER_EVENTS",{ROUTE_CHANGE_START:"kloyRouteChangeStart",ROUTE_CHANGE_SUCCESS:"kloyRouteChangeSuccess",ROUTE_CHANGE_ERROR:"kloyRouteChangeError",ROUTE_CHANGE_REQUEST:"kloyRouteChangeRequest"}).provider("kloyRouter",a("./router")).provider("kloyLayoutManager",a("./layout-manager")).factory("kloyRoute",a("./route")).run(["kloyLayoutManager","$rootScope","KLOY_ROUTER_EVENTS",function(a,b,c){b.section=function(b){return a.sections()[b]||null},b.$on(c.ROUTE_CHANGE_SUCCESS,function(){a.sync()})}]).run(["$rootScope","KLOY_ROUTER_EVENTS","kloyRouter","$location","kloyRoute",function(a,b,c,d,e){a.$on(b.ROUTE_CHANGE_REQUEST,function(a,b,d){c.go(b,d)}),a.$on("$locationChangeSuccess",function(a,b,f){var g=d.path(),h=e.path();b!==f&&g!==h&&(g=d.path(),c.goByPath(g))})}])},{"./layout-manager":1,"./route":5,"./router":6,ng:"QBxXRv"}],5:[function(a,b){var c=a("ng"),d=function(){var a,b,d,e,f={};return f._update=function(c){a=c.params||void 0,b=c.name||void 0,d=c.data||void 0,e=c.path||void 0},f.params=function(){return a},f.name=function(){return b},f.data=function(){return c.copy(d)},f.path=function(){return e},f.is=function(a){return f.name()===a},f.not=function(a){return!f.is(a)},f.includes=function(a){return-1!==f.name().indexOf(a)},f.excludes=function(a){return!f.includes(a)},f.startsWith=function(a){return f.name().substring(0,a.length)===a},f.endsWith=function(a){var b=f.name();return b.substring(b.length-a.length)===a},f};b.exports=d},{ng:"QBxXRv"}],6:[function(a,b){var c=a("ng"),d=function(a,b,d,e,f,g,h,i,j){var k,l,m,n,o,p,q,r,s,t={},u={},v={},w=g.ROUTE_CHANGE_START,x=g.ROUTE_CHANGE_SUCCESS,y=g.ROUTE_CHANGE_ERROR,z=!1;return n=function(){c.forEach(a,function(a,b){var d,e;d=u[b]||{},e={permissions:function(a){return c.isDefined(a)&&(d.permissions=a),d.permissions},requireParams:function(a){return c.isDefined(a)&&(d.requiredParams=a),d.requiredParams},prefetch:function(a){return c.isDefined(a)&&(d.prefetchFn=a),d.prefetchFn},data:function(a){return c.isDefined(a)&&(d.data=c.copy(a)),d.data},path:function(a){return c.isDefined(a)&&(d.path=a),d.path}},a.forEach(function(a){a.bind(e)()}),u[b]=d})},p=function(){c.forEach(u,function(a,b){var d=a.path;c.isDefined(d)&&(v[d]=b)})},k=function(a){var e,f=[];return a=a||[],e=i.defer(),e.resolve(),f.push(e.promise),a.forEach(function(a){var e,g;if(e=b[a],!c.isFunction(e))throw"router.checkPermissions(): unknown permission "+a;try{g=d.invoke(e)}catch(i){throw h.error("router.checkPermissions(): problem invoking permission",i),i}f.push(g)}),i.all(f)},l=function(a,b){var d=i.defer(),e=[];return a=a||{},c.isArray(b)?(b.forEach(function(b){b in a||e.push(b)}),e.length?i.reject("missing required param(s) "+e.join(", ")):(d.resolve(),d.promise)):(d.resolve(),d.promise)},m=function(a){var b,e;if(c.isUndefined(a))return e=i.defer(),e.resolve(),e.promise;if(!c.isFunction(a))throw"router.prefetch(): argument must be a function or undefined";try{b=d.invoke(a)}catch(f){throw h.error("router.doPrefetch(): problem invoking prefetch",f),f}return b},o=function(a,b){var d,f=[];c.isUndefined(a)||(a.split("/").forEach(function(a){f.push(":"===a.charAt(0)?b[a.substr(1)]:a)}),d=f.join("/"),e.path(d))},q=function(a){return c.isDefined(v[a])?!0:r(a)!==!1?!0:!1},r=function(a){var b=!1,c=a.split("/"),d=Object.keys(v);return d.every(function(d){var e,f=d.split("/"),g=[];return f.length!==c.length?!0:(f.forEach(function(a,b){g.push(":"===a.charAt(0)?c[b]:a)}),e=g.join("/"),e!==a?!0:(b=d,!1))}),b},s=function(a,b){var c,d=a.split("/"),e=b.split("/");return d.forEach(function(a,b){":"===a.charAt(0)&&(c=c||{},c[a.substr(1)]=e[b])}),c},t.goByPath=function(a){var b,c,d,e=q(a);return e?(b=r(a),c=v[b],d=s(b,a),t.go(c,d)):(f.$broadcast(y,{type:"unknown_path",message:"Path "+a+" does not match a route"},void 0,j),i.reject("unknown_path"))},t.go=function(a,b){var d,e,g,n;if(n=u[a],c.isUndefined(n))throw"router.go() unknown route "+a;return z?(e="router.go(): paused, cannot go to "+a,h.debug(e),i.reject(e)):(f.$broadcast(w,a,j),g=!1,d=k(n.permissions).then(function(){return l(b,n.requiredParams)},function(b){return g?i.reject(b):(h.debug("router.go(): permissions error",b,a),f.$broadcast(y,{message:b,type:"permissions"},a,j),g=!0,i.reject(b))}).then(function(){return m(n.prefetchFn)},function(b){return g?i.reject(b):(h.debug("router.go(): params error",b,a),f.$broadcast(y,{message:b,type:"params"},a,j),g=!0,i.reject(b))}).then(null,function(b){return g?i.reject(b):(h.debug("router.go(): prefetch error",b,a),f.$broadcast(y,{message:b,type:"prefetch"},a,j),g=!0,i.reject(b))}).then(function(c){var d=n.path;return j._update({params:b,name:a,data:n.data,path:d}),o(d,b),f.$broadcast(x,a,j),c}))},t.pause=function(){return z=!0,t},t.play=function(){return z=!1,t},n(),p(),t},e=function(){var a={},b={},e={};return a.addRoute=function(c,d){if(c in b)throw"routerProvider.addRoute() route already defined "+c;return b[c]=[d],a},a.modifyRoute=function(d,e){if(c.isUndefined(b[d]))throw"routerProvider.modifyRoute() route not defined "+d;return b[d].push(e),a},a.addPermission=function(b,c){if(b in e)throw"routerProvider.addPermission(): permission already defined";return e[b]=c,a},a.$get=["$injector","$location","$rootScope","KLOY_ROUTER_EVENTS","$log","$q","kloyRoute",function(a,c,f,g,h,i,j){return d(b,e,a,c,f,g,h,i,j)}],a};b.exports=e},{ng:"QBxXRv"}]},{},[4]);